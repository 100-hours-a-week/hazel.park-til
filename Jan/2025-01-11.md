## ğŸ—“ï¸ 2025-01-11

### ğŸŒ ìŠ¤í¬ëŸ¼

- í•™ìŠµ ëª©í‘œ 1. Kubernetes Archi
- í•™ìŠµ ëª©í‘œ 2. Kubernetes Object

### ğŸ’¡ ìƒˆë¡œ ë°°ìš´ ë‚´ìš©

#### 1. Kubernetes Archi

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” Control Plane(master)ê³¼ Worker Nodeë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒ <br />
Control Planeì€ Worker Nodeë¥¼ ê´€ë¦¬í•¨ <br />
Podë“¤ì€ Worker Nodeë“¤ì— ë°°í¬ë˜ì–´ ì‹¤í–‰ë¨ <br />

![Kubernetes Archi](https://github.com/user-attachments/assets/2f821675-0f56-413c-8b81-420d906a26cc)

- **Control Plane** === ë³¸ì‚¬ <br />
  - kube-apiserver (like ì•ˆë‚´ ë°ìŠ¤í¬): í´ëŸ¬ìŠ¤í„°ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì ‘ìˆ˜
  - etcd: í´ëŸ¬ìŠ¤í„°ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ key-value í˜•íƒœë¡œ ì €ì¥
  - kube-schedule (like ì¸ì‚¬ë‹´ë‹¹): ìƒˆë¡œ ìƒê¸´ podë¥¼ ì–´ë–¤ ë…¸ë“œì— ë°°ì¹˜í• ì§€ ê²°ì •
  - kube-controll-manager: podì˜ ìƒíƒœë¥¼ ê´€ë¦¬ (ex. replicasetì„ ë§Œì¡±í•˜ëŠ”ì§€?)
    <br />
    <br />
- **Worker Node** === ì§€ì‚¬
  - kubelet: ë…¸ë“œì—ì„œ ì»¨í…Œì´ë„ˆê°€ ë™ì‘í•˜ë„ë¡ ë„ì›€, podë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‘ì„±í•˜ëŠ” YAML íŒŒì¼ì„ applyí•˜ë©´ apiserverì— ìš”ì²­ì´ ê°”ë‹¤ê°€ kubeletìœ¼ë¡œ ëŒì•„ì˜´
  - container runtime: podì— ìˆëŠ” ì»¨í…Œì´ë„ˆì˜ ì‹¤í–‰ì„ ë‹´ë‹¹
  - kube-proxy: í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ê·¸ì— ë§ëŠ” podë¡œ ë³´ë‚´ì¤Œ (podì˜ ipëŠ” ê³ ì •ì ì´ì§€ ì•Šê¸° ë•Œë¬¸)

<br />

#### 2. Kubernetes Object

í´ëŸ¬ìŠ¤í„°ì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë‹¨ìœ„ <br />
ì˜ë„ë¥¼ ë‹´ê³  ìˆëŠ” ë ˆì½”ë“œë¡œ, í´ëŸ¬ìŠ¤í„°ëŠ” ê·¸ ì˜ë„ëŒ€ë¡œ ì¡´ì¬í•  ìˆ˜ ìˆë„ë¡ ìµœì„ ì„ ë‹¤í•¨
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” í•­ìƒ ì˜¤ë¸Œì íŠ¸ì˜ "í˜„ì¬ ìƒíƒœ"ë¥¼ "ì˜ë„í•œ ìƒíƒœ"ì™€ ë™ì¼í•˜ê²Œ ë§Œë“¤ë„ë¡ ë™ì‘í•¨
`spec`ì„ ê°€ì§„ ì˜¤ë¸Œì íŠ¸ëŠ” í•­ìƒ í•´ë‹¹ ìƒíƒœë¥¼ ê°–ë„ë¡ ìœ ì§€ì‹œì¼œì•¼ í•¨
`status`ëŠ” k8sì— ì˜í•´ ì—…ë°ì´íŠ¸ëœ ì˜¤ë¸Œì íŠ¸ì˜ í˜„ì¬ ìƒíƒœ, ì´ê±¸ í•­ìƒ `spec`ê³¼ ì¼ì¹˜ì‹œì¼œì•¼ í•¨
<br />
<br />

|      ì •ì„(?) ì•„ì´ì½˜      |          ê·€ì—¬ì›€          |
| :----------------------: | :--------------------------------: |
| ![icon1](https://github.com/user-attachments/assets/94a67df7-b903-4296-98f4-d3ebd26f5cc8) | ![icon2](https://github.com/user-attachments/assets/b40ef710-44d7-4601-b34e-379a0ee60c96) |

<br />

- **Pod**
  - ê°€ì¥ ì‘ì€ ë°°í¬ ë‹¨ìœ„
  - 1ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆ ìƒì„± ê°€ëŠ¥
  - ì»¨í…Œì´ë„ˆë¥¼ podë¡œ ë¬¶ëŠ” ì´ìœ ëŠ” podë§ˆë‹¤ ipê°€ ë‹¤ë¥´ê³  ê»ë‹¤ í‚¤ë©´ ê³„ì† ë°”ë€œ -> ê°™ì€ ëª©ì ì„ ê°€ì§„ ì»¨í…Œì´ë„ˆë¼ë¦¬ëŠ” í†µì‹ ì´ í¸í•´ì•¼ í•˜ë‹ˆê¹Œ ê°™ì€ podë¡œ ë¬¶ì–´ë²„ë¦¼
- **ReplicaSet**
  - podë¥¼ ì›í•˜ëŠ” ìˆ˜ë§Œí¼ ì‚´ì•„ìˆë„ë¡ ìœ ì§€í•´ì¤Œ
  - ë³´í†µì€ Deploymentë¡œ ìë™ ìƒì„±ë˜ê³  ê´€ë¦¬ë¨
  - ê·¸ë˜ì„œ ë”°ë¡œ ë§Œë“¤ ì¼ì€ ê±°ì˜ ì—†ì„ê²ƒì„
- **Deployment**
  - ì—¬ëŸ¬ podë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•¨
  - pod ë°°í¬ ìë™í™”ë¥¼ ìœ„í•œ ì˜¤ë¸Œì íŠ¸ì„
  - ë¬´ì¤‘ë‹¨ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ë°°í¬ ì „ëµì„
    - Recreate ì „ëµ: ìƒˆë¡œìš´ ë²„ì „ ë°°í¬ì‹œ, ì´ì „ pod ëª¨ë‘ ì‚­ì œ í›„ ìƒˆë¡œìš´ pod ìƒì„±
    - Rolling update ì „ëµ: ìƒˆë¡œìš´ ë²„ì „ ë°°í¬ì‹œ, ì´ì „ podë¥¼ ì ì§„ì ìœ¼ë¡œ ìƒˆë¡œìš´ podë¡œ êµì²´
    - Blue-Green ì „ëµ: ìƒˆë¡œìš´ ë²„ì „ ë°°í¬ì‹œ, íŠ¸ë˜í”½ì„ blue -> greenìœ¼ë¡œ ì „í™˜
- **Service**
  - ê¸°ë³¸ì ìœ¼ë¡œ podëŠ” í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•¨
  - ì–˜ë¥¼ ì´ìš©í•´ì„œ podê°€ ì™¸ë¶€ë¡œë¶€í„° ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆìŒ (pod ipë¥¼ ë…¸ì¶œì‹œí‚´)
- **Volume**
  - pod ë‚´ì˜ ì»¨í…Œì´ë„ˆì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ê³µìœ í•˜ê¸° ìœ„í•œ ê³µê°„
  - podê°€ ì ‘ê·¼í•˜ì—¬ read/write í•  ìˆ˜ ìˆìŒ
  - podê°€ ì¢…ë£Œë˜ì–´ë„ ë°ì´í„°ë¥¼ ë³´ì¡´í•  ìˆ˜ ìˆìŒ
    - emptyDir: podì˜ ë¼ì´í”„ì‚¬ì´í´ ë™ì•ˆë§Œ ì¡´ì¬ (podê°€ ì¢…ë£Œë˜ë©´ ì–˜ë„ ì£½ìŒ)
    - hostPath: podê°€ ì˜¬ë¼ê°„ Nodeì˜ pathì— ë§ˆìš´íŠ¸í•˜ì—¬ ì‚¬ìš©, ê·¸ë‹ˆê¹Œ ê°™ì€ ë…¸ë“œ ì•ˆì— ìˆëŠ” podë“¤ì€ ëª¨ë‘ read/write ê°€ëŠ¥
- **Namespace**
  - ê°€ìƒ í´ëŸ¬ìŠ¤í„°
  - ë¦¬ì†ŒìŠ¤ë¥¼ ê·¸ë£¹í™”í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
  - ë‚˜ëŠ” íƒœê·¸ ëŠë‚Œìœ¼ë¡œ ì´í•´í•¨
  - íŒ€/í™˜ê²½/ì„œë¹„ìŠ¤ ë‹¨ìœ„ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŒ
    ![Namespace](https://github.com/user-attachments/assets/e4b3ae10-1b2a-440a-b2c0-f2fc3768e731)

- **Secret**
  - ì•”í˜¸í™” ë°ì´í„°ë¥¼ ì €ì¥í•¨

### ğŸ‘ğŸ» ì˜¤ëŠ˜ì˜ íšŒê³ 

- cluster, controll plane, namespaceê°€ ë§ì´ í—·ê°ˆë ¸ëŠ”ë° ë³µìŠµí•˜ë©´ì„œ ì •ë¦¬ê°€ ëœ ê±° ê°™ë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ ì–´ë µë‹¤.
<div>
  <img style="width: 160px; height: auto;" src="https://github.com/user-attachments/assets/f98d1edb-b0ee-4fe3-8db7-cb32e20a3247"/>
</div>

### ğŸ”— ì°¸ê³  ìë£Œ ë° ë§í¬

- [kubernetes Architecture ë ˆí¼ëŸ°ìŠ¤](https://www.samsungsds.com/kr/insights/kubernetes-3.html)
- [kubernetes objects png](https://medium.com/@talukder9712/kubernetes-native-objects-a9de0fb32564)
- [kubernetes namespace ë ˆí¼ëŸ°ìŠ¤](https://artist-developer.tistory.com/33)
