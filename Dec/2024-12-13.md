## 🗓️ 2024-12-14

### 🐌 스크럼

- 학습 목표 1. Docker Swarm
- 학습 목표 2. Kubernetis

### 💡 새로 배운 내용

#### 1. ghcr (Github Container Registry)

패키지로 사용할 수 있는 이미지 저장소

#### 2. gh (Github CLI)

Github CLI <br />

- `gh auth login`: github에 로그인 후 cli 접근 허용
- `gh repo create`: create repo
- `gh issue create`: create issue
  등등

#### 3. 클러스터

여러 대의 컴퓨너를 하나로 묶은 것

- 노드: 컴퓨터
- 네트워크: 노드들이 연결되어 통신하는 작업
- 운영체제: 각 노드들은 각자의 운영체제를 가짐
- 작업 조정: 클러스터 미들웨어가 각 노드에 작업을 배정해서 하나의 단위로 움직이게 해줌
  👉🏻 여러 대의 컴퓨터 성능을 이용하기 때문에 성능이 짱 좋음, 컴퓨터 한 대가 고장나도 다른 거에 요청 보내면 됨 (가용성), 더 가성비가 좋을 수도 있다. (비용 효율성)

**종류**

- 컴퓨터 클러스터: 여러 대의 컴퓨터가 하나의 강력한 컴퓨터처럼 작동, 중앙 프로그램이 각 컴퓨터에 작업을 내려줌
- 컨테이너 클러스터

  - 도커 호스트(하나의 컴터) 위에 여러 컨테이너를 띄울 수 있음
  - 컨테이너 클러스터는 이 호스트를 연결해서 하나의 더 큰 묶음을 가짐

  👉🏻 확장성(LB처럼 여러 호스트에 작업을 분산시킬 수 있음), 고가용성(하나의 호스트에 문제가 생겨도 다른 호스트가 작업을 할 수 있음), 효율적 자원 관리가 가능 (필요에 따라 컨테이너를 다른 호스트로 위치시킬 수 있음)

  👉🏻 요거를 컨테이너 오케스트레이션이 해줌

**서버 관리 역사**

과거에는 Ansible, Chef, Puppet같은 도구로 서버를 관리했음

이건 개발자가 문서를 보면서 서버 설정을 하는 방식임

근데 이제 서버가 너무 많아짐

그래서 프로그램이 서버 설정을 하는 방식으로 바뀜

가상머신 (VirtualBox, VM)으로도 할 수는 있는데 GuestOS 때문에 너무 무거움

그래서 클라우드가 나옴 (ex. AWS SLA)

**도커만 쓰면 안 되나**
일단 도커는

1. 컨테이너 생성이 쉽고 효율적임
2. 이미지를 통해 컨테이너가 생성되기 때문에 롤백이 쉬움
3. 언제나 같은 환경을 보장함

절차는

1. 코드 작성
2. 이미지 빌드
3. 레지스트리 등록
4. 컨테이너로 실행

**문제점**

서비스가 확장함에 따라 컨테이너가 너무 많아지면서 관리가 어려워짐

그리고 안 바쁠 땐 노는 컨테이너 생기고 불필요한 자원 누수가 발생

죽은 서버가 생기면 개발자가 하나하나 찾고 문제를 고쳐줘야 함

#### 4. 도커 스웜

도커에서 만든 컨테이너 오케스트레이션 도구

호스트들을 관리하고 컨테이너를 어떤 호스트에 둘지 자동으로 결정함 === 분산설계

👉🏻 고가용성, 부하 분산, 리소스 효율성, 유연한 확장성

- 선언적 서비스 모델을 제공함
- 스케일링: 서비스 확장/축소가 쉬움
- 상태 조정: 노드 실패시 컨테이너를 자동으로 재배치 해줌

### 👏🏻 오늘의 회고

- 오케스트레이션 도구의 등장 배경을 알 수 있었다. 오케스트레이션 도구의 개념들도 정리할 수 있어 좋았다.
- 기존에 EC2 한 대에서 진행했던 블루 그린 배포를 EC2 두 대로 나눠서 다시 배포를 설정해두었고, 리버스 프록시로 백엔드 엔드포인트도 바꿀 수 있게 설정해두었다. 이제 Github actions랑 EB 설정까지... 해보쟈......

### 🔗 참고 자료 및 링크

- [hazel 한 줄 정리](https://www.notion.so/adapterz/30fe1a4603e345e784022d8aabbf1a08)
