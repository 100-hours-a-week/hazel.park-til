## ğŸ—“ï¸ 2024-12-18

### ğŸŒ ìŠ¤í¬ëŸ¼

- í•™ìŠµ ëª©í‘œ 1. nginx error 502 Bad Gateway ì˜¤ë¥˜ í•´ê²°í•˜ê¸°

### ğŸ’¡ ìƒˆë¡œ ë°°ìš´ ë‚´ìš©

#### 1. ë°œìƒí•œ ì—ëŸ¬ë“¤

**1. ì»¤ë®¤ë‹ˆí‹° urlì— ì ‘ì†í–ˆëŠ”ë° ì•„ë˜ì˜ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ìŒ <br />**
`Request URL:
http://52.79.154.1/api/posts?page=0&limit=4
Request Method:
GET
Status Code:
502 Bad Gateway
Remote Address:
52.79.154.1:80
Referrer Policy:
strict-origin-when-cross-origin` <br />
ğŸ‘‰ğŸ» nginxì— ë¬¸ì œê°€ ìˆìŒ

<br />

**2. ì„œë²„ EC2ì— ì ‘ì†í•˜ì—¬ nginxì˜ error.log í™•ì¸ <br />**
`2024/12/18 04:45:10 [error] 207307#207307: *1 upstream prematurely closed connection while reading response header from upstream, client: 211.211.140.131, server: , request: "GET /api/posts?page=0&limit=4 HTTP/1.1", upstream: "http://127.0.0.1:81/api/posts?page=0&limit=4", host: "52.79.154.1", referrer: "http://52.79.154.1/html/Posts.html"` <br />
ğŸ‘‰ğŸ» Nginxê°€ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜(ë˜ëŠ” upstream)ì—ì„œ ì‘ë‹µ í—¤ë”ë¥¼ ìˆ˜ì‹ í•˜ê¸° ì „ì— ì—°ê²°ì´ ë‹«í˜”ìŒ

<br />

**3. ë°±ì—”ë“œ ë„ì»¤ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•´ì„œ í™•ì¸ <br />**
`[root@ip-172-31-48-52 nginx]# docker exec -it 5b2 /bin/bash
root@5b2924cfc423:/usr/src/app# curl http://127.0.0.1:3000/api/posts?page=0
curl: (7) Failed to connect to 127.0.0.1 port 3000 after 0 ms: Couldn't connect to server`
ğŸ‘‰ğŸ» ì˜¬ë°”ë¥¸ í¬íŠ¸ì—ì„œ ë°›ê³  ìˆì§€ ì•ŠìŒ

<br />

**4. í•´ê²°** <br />
ë°±ì—”ë“œ ì„œë²„ëŠ” 3001ë²ˆ í¬íŠ¸ì—ì„œ ì‹œì‘ë˜ê³  ìˆì—ˆëŠ”ë° ë„ì»¤ ì»¨í…Œì´ë„ˆ í¬íŠ¸ ë§¤í•‘ì„ 81:3000ìœ¼ë¡œ í•´ì„œ ë°œìƒí•œ ì˜¤ë¥˜ì˜€ë‹¤. ë°±ì—”ë“œ ì„œë²„ë¥¼ 3000ë²ˆì—ì„œ ì‹œì‘í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ë‹¤.

### ğŸ‘ğŸ» ì˜¤ëŠ˜ì˜ íšŒê³ 

- ì˜¤ëŠ˜ github actionì´ë‘ ì—°ë™í•˜ë ¤ í–ˆëŠ”ë°, í˜„ì¬ multi container buildë¥¼ í•˜ê³  ìˆì–´ì„œ í”„ë¡ íŠ¸ë‘ ë°± ì´ë¯¸ì§€ë¥¼ ë™ì‹œì— EBë¡œ ì˜¬ë¦¬ëŠë¼ github actionì„ ì–´ë–¤ì‹ìœ¼ë¡œ ê±¸ì–´ì•¼ í• ì§€ ê³ ë¯¼ì´ ëœë‹¤.
- ì´ì „ì— ë°›ì€ QAë¥¼ ëª¨ë‘ ìˆ˜í–‰í•˜ê³  ìƒˆë¡œìš´ QAë¥¼ ë°›ì•˜ëŠ”ë° ì™œ ìê¾¸ ìì˜í•œ ê²ƒë“¤ì„ ë†“ì¹˜ëŠ”ì§€ ëª¨ë¥´ê² ë‹¤ ğŸ˜“ ì¢€ ë” ê¼¼ê¼¼í•˜ê²Œ ê°œë°œí•´ì•¼ í•˜ëŠ”ë°...........

### ğŸ”— ì°¸ê³  ìë£Œ ë° ë§í¬

-
